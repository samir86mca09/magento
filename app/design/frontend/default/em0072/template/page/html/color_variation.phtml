<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php 
/**
 * Store switcher template
 *
 * @see Mage_Core_Block_Store_Switcher
 */
?>
<?php	
	$setting = Mage::helper('em0072settings');
	$check = $setting->getGeneral_DisableFrontendVariation();
 ?>
<?php if($check != 1) : ?>
	<div class="color_variation">
		<a href="javascript:void(0)" class="btn_color_variation"><?php echo $this->__("Store view") ?></a>
		<div class="colordiv" style="display:none">
			<a href="javascript:void(0)" class="btn_color_close"><?php echo $this->__("Close") ?></a>
			<div class="color_content">
				<div id="slider_storeview" class="slider_container">
					<img src="<?php echo $this->getSkinUrl('images/colorvariation/ColorVariations.png'); ?>" alt="<?php echo $this->__('Color Variation'); ?>" />
				</div>
			</div>
		</div>   
	</div>

	<script type="text/javascript">
		jQuery(document).ready(function($) {
			var screen = "<div id='bg_fade_color'></div>";
			$(document.body).append(screen);
					
			$(".btn_color_variation").click(function() {
				var bg	=	$("#bg_fade_color");
				bg.css("opacity",0.5);
				bg.css("visibility","visible");
				$(".colordiv").show();
				
				$(".colordiv").css('top', Math.max($(document).scrollTop(), Math.min($(this).offset().top, $(document).scrollTop() + $(window).height() - $(".colordiv").outerHeight())) + 20 + 'px');
				//color_show();
			});
			
			$(".btn_color_close").click(function() {
				color_hide();
			});
			
			/*function color_show(){
				var bg	=	$("#bg_fade");
				bg.css("opacity",0.5);
				bg.css("visibility","visible");
				$(".colordiv").show();
				
				$(".colordiv").css('top', Math.max($(document).scrollTop(), Math.min($(this).offset().top, $(document).scrollTop() + $(window).height() - panel.outerHeight())) + 'px');
			}*/
			
			function color_hide(){
				var bg	=	$("#bg_fade_color");
				$(".colordiv").hide();
				bg.css("opacity",0);
				bg.css("visibility","hidden");
			}
			
		});
	</script>
<?php endif; ?>
